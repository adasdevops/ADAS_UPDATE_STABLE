version: '3'
services:
  cvat-server:
    image: cvat_server:1
    registry-login-server: ${{ secrets.REGISTRY_LOGIN_SERVER }}
    registry-username: ${{ secrets.REGISTRY_USERNAME }}
    registry-password: ${{ secrets.REGISTRY_PASSWORD }}    
    container_name: cvat-server
    environment:
      CVAT_POSTGRES_HOST=DB_HOST
      CVAT_REDIS_HOST=REDIS_HOST
    ports:
        - "8080:8080"

  cvat-ui:
    image: cvat_ui:1
    registry-login-server: ${{ secrets.REGISTRY_LOGIN_SERVER }}
    registry-username: ${{ secrets.REGISTRY_USERNAME }}
    registry-password: ${{ secrets.REGISTRY_PASSWORD }}     
    container_name: cvat-ui
    ports:
        - "80:80"
